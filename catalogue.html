<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SellFix Designing | Catalogue</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Inter;background:#000;color:#fff}

/* HEADER */
.header{
position:sticky;top:0;z-index:1000;
background:#0b0b0b;padding:10px 14px;
border-bottom:1px solid #1f1f1f
}
.header img{height:34px}

/* CONTAINER */
.container{max-width:460px;margin:auto;padding:0 16px 40px}

h2{font-size:20px;margin:18px 0}

.sub-tag{
display:inline-block;
background:linear-gradient(45deg,#feda75,#fa7e1e,#d62976,#962fbf,#4f5bd5);
padding:8px 14px;border-radius:20px;
font-size:13px;margin:14px 0
}

.card{
background:#3a3a3a;border-radius:16px;
padding:14px;margin-bottom:22px
}
.variant-title{font-weight:600;margin-bottom:8px}

.images{display:flex;gap:10px;overflow-x:auto;margin-bottom:10px}
.images img{
width:100px;height:100px;
object-fit:cover;border-radius:10px;
cursor:pointer
}

label{font-size:12px;color:#ddd;margin-top:10px;display:block}
select{
width:100%;padding:10px;border-radius:10px;
border:none;margin-top:4px
}
.size-select{background:#f5e642;color:#000;font-weight:600}

.price{font-size:18px;font-weight:600;margin-top:12px}

.order-btn{
margin-top:14px;background:#25D366;color:#fff;
text-align:center;padding:14px;border-radius:30px;
text-decoration:none;font-weight:600;display:block
}

/* VIDEO */
.shorts-carousel-horizontal{
display:flex;gap:14px;overflow-x:auto;margin:14px 0
}
.shorts-slide{
flex:0 0 150px;height:275px;
border-radius:16px;overflow:hidden;
background:#000;position:relative
}
.shorts-thumbnail{
position:absolute;inset:0;
background-size:cover;background-position:center;
display:flex;align-items:center;justify-content:center;
font-size:48px;cursor:pointer
}

/* IMAGE POPUP */
#imgPopup{
position:fixed;inset:0;background:rgba(0,0,0,.85);
display:none;align-items:center;justify-content:center;
z-index:10000
}
#imgPopup img{max-width:90%;max-height:90%;border-radius:14px}
#closePopup{position:absolute;top:18px;right:22px;font-size:32px}
</style>
</head>

<body>

<div class="header">
  <img src="sellixlogo1.png">
</div>

<div class="container">

  <div class="shorts-carousel-horizontal" id="videoSection"></div>

  <h2>ü™ß Name Plates</h2>
  <div id="catalogue"></div>

</div>

<!-- IMAGE POPUP -->
<div id="imgPopup">
  <span id="closePopup">√ó</span>
  <img id="popupImg">
</div>

<script>
let DATA = null;

/* IMAGE POPUP */
function openImage(img){
popupImg.src = img.src;
imgPopup.style.display="flex";
}
closePopup.onclick=()=>imgPopup.style.display="none";
imgPopup.onclick=e=>{
if(e.target.id==="imgPopup") imgPopup.style.display="none";
};

/* LOAD JSON SAFELY */
fetch("products.json")
.then(r=>{
  if(!r.ok) throw "products.json not found";
  return r.json();
})
.then(json=>{
  DATA = json;
  renderVideos();
  renderCatalogue();
  loadYouTubeAPI();
})
.catch(err=>{
  document.getElementById("catalogue").innerHTML =
    "<p style='color:red'>‚ùå products.json missing or invalid</p>";
  console.error(err);
});

/* VIDEOS */
function renderVideos(){
const box = document.getElementById("videoSection");
DATA.videos.forEach(v=>{
box.innerHTML += `
<div class="shorts-slide" data-video-id="${v.videoId}">
  <div class="shorts-thumbnail"
   style="background-image:url('${v.thumbnail}')">‚ñ∂</div>
</div>`;
});
}

/* CATALOGUE */
function renderCatalogue(){
const wrap = document.getElementById("catalogue");

DATA.categories.forEach(cat=>{
wrap.innerHTML += `<div class="sub-tag">${cat.name}</div>`;

cat.products.forEach(p=>{
let imgs="";
(p.images||[]).forEach(i=>{
imgs+=`<img src="${i}" onclick="openImage(this)">`;
});

let sizes="";
Object.keys(p.sizes).forEach(s=>{
sizes+=`<option>${s}</option>`;
});

wrap.innerHTML+=`
<div class="card">
<div class="variant-title">${p.title}</div>
${imgs?`<div class="images">${imgs}</div>`:""}

<label>Size</label>
<select class="size-select" onchange="this.nextElementSibling.innerHTML='‚Çπ '+${JSON.stringify(p.sizes)}[this.value]">
${sizes}
</select>

<div class="price">‚Çπ ${Object.values(p.sizes)[0]}</div>

<a class="order-btn"
href="https://wa.me/${DATA.whatsappNumber}?text=${encodeURIComponent(p.title)}"
target="_blank">Order on WhatsApp</a>
</div>`;
});
});
}

/* YOUTUBE */
function loadYouTubeAPI(){
const tag=document.createElement("script");
tag.src="https://www.youtube.com/iframe_api";
document.body.appendChild(tag);
}

let players=[];
function onYouTubeIframeAPIReady(){
document.querySelectorAll(".shorts-slide").forEach((slide,i)=>{
const id=slide.dataset.videoId;
const iframe=document.createElement("iframe");
iframe.src=`https://www.youtube.com/embed/${id}?enablejsapi=1&controls=0`;
iframe.style.width="100%";
iframe.style.height="100%";
iframe.style.display="none";
slide.appendChild(iframe);

const player=new YT.Player(iframe,{
events:{
onReady:()=>{
players[i]=player;
slide.onclick=()=>{
players.forEach(p=>p&&p.pauseVideo());
document.querySelectorAll("iframe").forEach(f=>f.style.display="none");
document.querySelectorAll(".shorts-thumbnail").forEach(t=>t.style.display="flex");
iframe.style.display="block";
slide.querySelector(".shorts-thumbnail").style.display="none";
player.playVideo();
};
}
}
});
});
}
</script>

</body>
</html>